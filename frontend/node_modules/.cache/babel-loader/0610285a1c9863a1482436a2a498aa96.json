{"ast":null,"code":"import { Cache } from './Cache.js';\nimport { Loader } from './Loader.js';\nimport { createElementNS } from '../utils.js';\n\nclass ImageLoader extends Loader {\n  constructor(manager) {\n    super(manager);\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    if (this.path !== undefined) url = this.path + url;\n    url = this.manager.resolveURL(url);\n    const scope = this;\n    const cached = Cache.get(url);\n\n    if (cached !== undefined) {\n      scope.manager.itemStart(url);\n      setTimeout(function () {\n        if (onLoad) onLoad(cached);\n        scope.manager.itemEnd(url);\n      }, 0);\n      return cached;\n    }\n\n    const image = createElementNS('img');\n\n    function onImageLoad() {\n      removeEventListeners();\n      Cache.add(url, this);\n      if (onLoad) onLoad(this);\n      scope.manager.itemEnd(url);\n    }\n\n    function onImageError(event) {\n      removeEventListeners();\n      if (onError) onError(event);\n      scope.manager.itemError(url);\n      scope.manager.itemEnd(url);\n    }\n\n    function removeEventListeners() {\n      image.removeEventListener('load', onImageLoad, false);\n      image.removeEventListener('error', onImageError, false);\n    }\n\n    image.addEventListener('load', onImageLoad, false);\n    image.addEventListener('error', onImageError, false);\n\n    if (url.slice(0, 5) !== 'data:') {\n      if (this.crossOrigin !== undefined) image.crossOrigin = this.crossOrigin;\n    }\n\n    scope.manager.itemStart(url);\n    image.src = url;\n    return image;\n  }\n\n}\n\nexport { ImageLoader };","map":{"version":3,"sources":["C:/Users/dell/Desktop/projektlogin/vue-3-authentication-jwt/src/games/three/src/loaders/ImageLoader.js"],"names":["Cache","Loader","createElementNS","ImageLoader","constructor","manager","load","url","onLoad","onProgress","onError","path","undefined","resolveURL","scope","cached","get","itemStart","setTimeout","itemEnd","image","onImageLoad","removeEventListeners","add","onImageError","event","itemError","removeEventListener","addEventListener","slice","crossOrigin","src"],"mappings":"AAAA,SAASA,KAAT,QAAsB,YAAtB;AACA,SAASC,MAAT,QAAuB,aAAvB;AACA,SAASC,eAAT,QAAgC,aAAhC;;AAEA,MAAMC,WAAN,SAA0BF,MAA1B,CAAiC;AAEhCG,EAAAA,WAAW,CAAEC,OAAF,EAAY;AAEtB,UAAOA,OAAP;AAEA;;AAEDC,EAAAA,IAAI,CAAEC,GAAF,EAAOC,MAAP,EAAeC,UAAf,EAA2BC,OAA3B,EAAqC;AAExC,QAAK,KAAKC,IAAL,KAAcC,SAAnB,EAA+BL,GAAG,GAAG,KAAKI,IAAL,GAAYJ,GAAlB;AAE/BA,IAAAA,GAAG,GAAG,KAAKF,OAAL,CAAaQ,UAAb,CAAyBN,GAAzB,CAAN;AAEA,UAAMO,KAAK,GAAG,IAAd;AAEA,UAAMC,MAAM,GAAGf,KAAK,CAACgB,GAAN,CAAWT,GAAX,CAAf;;AAEA,QAAKQ,MAAM,KAAKH,SAAhB,EAA4B;AAE3BE,MAAAA,KAAK,CAACT,OAAN,CAAcY,SAAd,CAAyBV,GAAzB;AAEAW,MAAAA,UAAU,CAAE,YAAY;AAEvB,YAAKV,MAAL,EAAcA,MAAM,CAAEO,MAAF,CAAN;AAEdD,QAAAA,KAAK,CAACT,OAAN,CAAcc,OAAd,CAAuBZ,GAAvB;AAEA,OANS,EAMP,CANO,CAAV;AAQA,aAAOQ,MAAP;AAEA;;AAED,UAAMK,KAAK,GAAGlB,eAAe,CAAE,KAAF,CAA7B;;AAEA,aAASmB,WAAT,GAAuB;AAEtBC,MAAAA,oBAAoB;AAEpBtB,MAAAA,KAAK,CAACuB,GAAN,CAAWhB,GAAX,EAAgB,IAAhB;AAEA,UAAKC,MAAL,EAAcA,MAAM,CAAE,IAAF,CAAN;AAEdM,MAAAA,KAAK,CAACT,OAAN,CAAcc,OAAd,CAAuBZ,GAAvB;AAEA;;AAED,aAASiB,YAAT,CAAuBC,KAAvB,EAA+B;AAE9BH,MAAAA,oBAAoB;AAEpB,UAAKZ,OAAL,EAAeA,OAAO,CAAEe,KAAF,CAAP;AAEfX,MAAAA,KAAK,CAACT,OAAN,CAAcqB,SAAd,CAAyBnB,GAAzB;AACAO,MAAAA,KAAK,CAACT,OAAN,CAAcc,OAAd,CAAuBZ,GAAvB;AAEA;;AAED,aAASe,oBAAT,GAAgC;AAE/BF,MAAAA,KAAK,CAACO,mBAAN,CAA2B,MAA3B,EAAmCN,WAAnC,EAAgD,KAAhD;AACAD,MAAAA,KAAK,CAACO,mBAAN,CAA2B,OAA3B,EAAoCH,YAApC,EAAkD,KAAlD;AAEA;;AAEDJ,IAAAA,KAAK,CAACQ,gBAAN,CAAwB,MAAxB,EAAgCP,WAAhC,EAA6C,KAA7C;AACAD,IAAAA,KAAK,CAACQ,gBAAN,CAAwB,OAAxB,EAAiCJ,YAAjC,EAA+C,KAA/C;;AAEA,QAAKjB,GAAG,CAACsB,KAAJ,CAAW,CAAX,EAAc,CAAd,MAAsB,OAA3B,EAAqC;AAEpC,UAAK,KAAKC,WAAL,KAAqBlB,SAA1B,EAAsCQ,KAAK,CAACU,WAAN,GAAoB,KAAKA,WAAzB;AAEtC;;AAEDhB,IAAAA,KAAK,CAACT,OAAN,CAAcY,SAAd,CAAyBV,GAAzB;AAEAa,IAAAA,KAAK,CAACW,GAAN,GAAYxB,GAAZ;AAEA,WAAOa,KAAP;AAEA;;AAjF+B;;AAsFjC,SAASjB,WAAT","sourcesContent":["import { Cache } from './Cache.js';\r\nimport { Loader } from './Loader.js';\r\nimport { createElementNS } from '../utils.js';\r\n\r\nclass ImageLoader extends Loader {\r\n\r\n\tconstructor( manager ) {\r\n\r\n\t\tsuper( manager );\r\n\r\n\t}\r\n\r\n\tload( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\turl = this.manager.resolveURL( url );\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst cached = Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( cached );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}, 0 );\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tconst image = createElementNS( 'img' );\r\n\r\n\t\tfunction onImageLoad() {\r\n\r\n\t\t\tremoveEventListeners();\r\n\r\n\t\t\tCache.add( url, this );\r\n\r\n\t\t\tif ( onLoad ) onLoad( this );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}\r\n\r\n\t\tfunction onImageError( event ) {\r\n\r\n\t\t\tremoveEventListeners();\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}\r\n\r\n\t\tfunction removeEventListeners() {\r\n\r\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\r\n\t\t\timage.removeEventListener( 'error', onImageError, false );\r\n\r\n\t\t}\r\n\r\n\t\timage.addEventListener( 'load', onImageLoad, false );\r\n\t\timage.addEventListener( 'error', onImageError, false );\r\n\r\n\t\tif ( url.slice( 0, 5 ) !== 'data:' ) {\r\n\r\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\r\n\t\t}\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\timage.src = url;\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport { ImageLoader };\r\n"]},"metadata":{},"sourceType":"module"}