{"ast":null,"code":"import { LineSegments } from '../objects/LineSegments.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { Color } from '../math/Color.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\nconst _vector = /*@__PURE__*/new Vector3();\n\nconst _boneMatrix = /*@__PURE__*/new Matrix4();\n\nconst _matrixWorldInv = /*@__PURE__*/new Matrix4();\n\nclass SkeletonHelper extends LineSegments {\n  constructor(object) {\n    const bones = getBoneList(object);\n    const geometry = new BufferGeometry();\n    const vertices = [];\n    const colors = [];\n    const color1 = new Color(0, 0, 1);\n    const color2 = new Color(0, 1, 0);\n\n    for (let i = 0; i < bones.length; i++) {\n      const bone = bones[i];\n\n      if (bone.parent && bone.parent.isBone) {\n        vertices.push(0, 0, 0);\n        vertices.push(0, 0, 0);\n        colors.push(color1.r, color1.g, color1.b);\n        colors.push(color2.r, color2.g, color2.b);\n      }\n    }\n\n    geometry.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n    geometry.setAttribute('color', new Float32BufferAttribute(colors, 3));\n    const material = new LineBasicMaterial({\n      vertexColors: true,\n      depthTest: false,\n      depthWrite: false,\n      toneMapped: false,\n      transparent: true\n    });\n    super(geometry, material);\n    this.type = 'SkeletonHelper';\n    this.isSkeletonHelper = true;\n    this.root = object;\n    this.bones = bones;\n    this.matrix = object.matrixWorld;\n    this.matrixAutoUpdate = false;\n  }\n\n  updateMatrixWorld(force) {\n    const bones = this.bones;\n    const geometry = this.geometry;\n    const position = geometry.getAttribute('position');\n\n    _matrixWorldInv.copy(this.root.matrixWorld).invert();\n\n    for (let i = 0, j = 0; i < bones.length; i++) {\n      const bone = bones[i];\n\n      if (bone.parent && bone.parent.isBone) {\n        _boneMatrix.multiplyMatrices(_matrixWorldInv, bone.matrixWorld);\n\n        _vector.setFromMatrixPosition(_boneMatrix);\n\n        position.setXYZ(j, _vector.x, _vector.y, _vector.z);\n\n        _boneMatrix.multiplyMatrices(_matrixWorldInv, bone.parent.matrixWorld);\n\n        _vector.setFromMatrixPosition(_boneMatrix);\n\n        position.setXYZ(j + 1, _vector.x, _vector.y, _vector.z);\n        j += 2;\n      }\n    }\n\n    geometry.getAttribute('position').needsUpdate = true;\n    super.updateMatrixWorld(force);\n  }\n\n}\n\nfunction getBoneList(object) {\n  const boneList = [];\n\n  if (object.isBone === true) {\n    boneList.push(object);\n  }\n\n  for (let i = 0; i < object.children.length; i++) {\n    boneList.push.apply(boneList, getBoneList(object.children[i]));\n  }\n\n  return boneList;\n}\n\nexport { SkeletonHelper };","map":{"version":3,"sources":["C:/Users/dell/Desktop/projektlogin/vue-3-authentication-jwt/src/games/three/src/helpers/SkeletonHelper.js"],"names":["LineSegments","Matrix4","LineBasicMaterial","Color","Vector3","BufferGeometry","Float32BufferAttribute","_vector","_boneMatrix","_matrixWorldInv","SkeletonHelper","constructor","object","bones","getBoneList","geometry","vertices","colors","color1","color2","i","length","bone","parent","isBone","push","r","g","b","setAttribute","material","vertexColors","depthTest","depthWrite","toneMapped","transparent","type","isSkeletonHelper","root","matrix","matrixWorld","matrixAutoUpdate","updateMatrixWorld","force","position","getAttribute","copy","invert","j","multiplyMatrices","setFromMatrixPosition","setXYZ","x","y","z","needsUpdate","boneList","children","apply"],"mappings":"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","sourcesContent":["import { LineSegments } from '../objects/LineSegments.js';\r\nimport { Matrix4 } from '../math/Matrix4.js';\r\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\r\nimport { Color } from '../math/Color.js';\r\nimport { Vector3 } from '../math/Vector3.js';\r\nimport { BufferGeometry } from '../core/BufferGeometry.js';\r\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\r\n\r\nconst _vector = /*@__PURE__*/ new Vector3();\r\nconst _boneMatrix = /*@__PURE__*/ new Matrix4();\r\nconst _matrixWorldInv = /*@__PURE__*/ new Matrix4();\r\n\r\n\r\nclass SkeletonHelper extends LineSegments {\r\n\r\n\tconstructor( object ) {\r\n\r\n\t\tconst bones = getBoneList( object );\r\n\r\n\t\tconst geometry = new BufferGeometry();\r\n\r\n\t\tconst vertices = [];\r\n\t\tconst colors = [];\r\n\r\n\t\tconst color1 = new Color( 0, 0, 1 );\r\n\t\tconst color2 = new Color( 0, 1, 0 );\r\n\r\n\t\tfor ( let i = 0; i < bones.length; i ++ ) {\r\n\r\n\t\t\tconst bone = bones[ i ];\r\n\r\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\r\n\r\n\t\t\t\tvertices.push( 0, 0, 0 );\r\n\t\t\t\tvertices.push( 0, 0, 0 );\r\n\t\t\t\tcolors.push( color1.r, color1.g, color1.b );\r\n\t\t\t\tcolors.push( color2.r, color2.g, color2.b );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } );\r\n\r\n\t\tsuper( geometry, material );\r\n\r\n\t\tthis.type = 'SkeletonHelper';\r\n\t\tthis.isSkeletonHelper = true;\r\n\r\n\t\tthis.root = object;\r\n\t\tthis.bones = bones;\r\n\r\n\t\tthis.matrix = object.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\r\n\t}\r\n\r\n\tupdateMatrixWorld( force ) {\r\n\r\n\t\tconst bones = this.bones;\r\n\r\n\t\tconst geometry = this.geometry;\r\n\t\tconst position = geometry.getAttribute( 'position' );\r\n\r\n\t\t_matrixWorldInv.copy( this.root.matrixWorld ).invert();\r\n\r\n\t\tfor ( let i = 0, j = 0; i < bones.length; i ++ ) {\r\n\r\n\t\t\tconst bone = bones[ i ];\r\n\r\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\r\n\r\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\r\n\t\t\t\t_vector.setFromMatrixPosition( _boneMatrix );\r\n\t\t\t\tposition.setXYZ( j, _vector.x, _vector.y, _vector.z );\r\n\r\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.parent.matrixWorld );\r\n\t\t\t\t_vector.setFromMatrixPosition( _boneMatrix );\r\n\t\t\t\tposition.setXYZ( j + 1, _vector.x, _vector.y, _vector.z );\r\n\r\n\t\t\t\tj += 2;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\r\n\r\n\t\tsuper.updateMatrixWorld( force );\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\nfunction getBoneList( object ) {\r\n\r\n\tconst boneList = [];\r\n\r\n\tif ( object.isBone === true ) {\r\n\r\n\t\tboneList.push( object );\r\n\r\n\t}\r\n\r\n\tfor ( let i = 0; i < object.children.length; i ++ ) {\r\n\r\n\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\r\n\r\n\t}\r\n\r\n\treturn boneList;\r\n\r\n}\r\n\r\n\r\nexport { SkeletonHelper };\r\n"]},"metadata":{},"sourceType":"module"}